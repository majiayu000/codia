# 产品需求文档 (PRD)

> **产品名称**: AI Virtual Companion (暂定名: Codia)
>
> **版本**: v1.0
>
> **创建日期**: 2026-01-04
>
> **作者**: Product Team
>
> **状态**: Draft → Review → Approved

---

## 变更记录

| 版本 | 日期 | 作者 | 变更说明 |
|------|------|------|----------|
| v1.0 | 2026-01-04 | PM | 初始 PRD |

---

## 目录

1. [执行摘要](#1-执行摘要)
2. [背景与战略对齐](#2-背景与战略对齐)
3. [目标与成功指标](#3-目标与成功指标)
4. [目标用户与画像](#4-目标用户与画像)
5. [用户故事与用例](#5-用户故事与用例)
6. [功能需求](#6-功能需求)
7. [非功能需求](#7-非功能需求)
8. [范围定义](#8-范围定义)
9. [设计与用户体验](#9-设计与用户体验)
10. [技术考量](#10-技术考量)
11. [发布计划](#11-发布计划)
12. [风险与开放问题](#12-风险与开放问题)
13. [附录](#附录)

---

## 1. 执行摘要

### 1.1 问题陈述

现代社会中，61% 的 18-25 岁年轻人报告"严重孤独"，但现有的 AI 陪伴解决方案存在明显不足：
- **纯文字 AI 聊天** (如 Character.AI) 缺乏沉浸感和情感连接
- **专用硬件设备** (如 CODE27, $400-500) 门槛过高，无法普及
- **隐私担忧**：42% 用户担心对话数据被收集

### 1.2 解决方案

构建一个 **Web 端 3D AI 虚拟伴侣应用**，具备以下核心特性：
- 3D VRM 角色渲染 + 表情系统
- 自然语言对话 (多 LLM 后端支持)
- 语音交互 (TTS/ASR)
- 实时口型同步
- 本地优先的隐私保护

### 1.3 核心成功指标

| 指标 | 目标 (6个月) | 衡量方式 |
|------|-------------|----------|
| DAU (日活跃用户) | 10,000 | 产品分析 |
| 平均会话时长 | ≥15 分钟 | 埋点统计 |
| D7 留存率 | ≥25% | 队列分析 |
| D30 留存率 | ≥10% | 队列分析 |
| 付费转化率 | ≥3% | 付款记录 |
| NPS (净推荐值) | ≥40 | 用户调研 |

---

## 2. 背景与战略对齐

### 2.1 为什么是现在？

```
市场时机:
├── AI 伴侣市场 2025: $370 亿，CAGR 31%
├── 72% 美国青少年尝试过 AI 伴侣
├── AI 伴侣 App 收入 2025 达 $1.2 亿，同比 +64%
└── VTuber 3D 市场增长 36%

技术成熟:
├── WebGPU 使浏览器高性能 3D 成为可能
├── VRM 格式已成为 3D 角色标准
├── 开源 LLM (Qwen, DeepSeek) 可本地运行
├── 浏览器端 TTS (Kokoro) 和 ASR (Whisper) 成熟
└── Amica 等开源项目证明技术可行性

竞争空白:
├── Character.AI 纯文字，无 3D
├── CODE27 太贵 ($400-500)
├── Amica 需要技术能力部署
└── 市场缺少"零门槛 3D AI 伴侣"
```

### 2.2 战略对齐

| 公司目标 | 产品贡献 |
|----------|----------|
| 探索 AI + 3D 技术交叉 | 验证 Web 端 AI 伴侣产品形态 |
| 建立开源社区影响力 | 开源核心代码，吸引开发者生态 |
| 获取早期用户和反馈 | 为后续商业化积累用户基础 |

### 2.3 不做的代价

- 错过 AI 陪伴市场爆发窗口期
- 被 Character.AI 等竞品抢占用户心智
- 3D + AI 技术能力沉淀机会流失

---

## 3. 目标与成功指标

### 3.1 业务目标

| 目标 | 定义 | 衡量指标 | 目标值 |
|------|------|----------|--------|
| **用户获取** | 吸引目标用户使用产品 | 注册用户数 | 50,000 (6个月) |
| **用户活跃** | 用户持续使用产品 | DAU | 10,000 |
| **用户留存** | 用户长期留在产品 | D30 留存 | ≥10% |
| **商业变现** | 验证付费模式可行性 | 付费转化率 | ≥3% |

### 3.2 用户目标

| 目标 | 定义 | 衡量指标 | 目标值 |
|------|------|----------|--------|
| **满足陪伴需求** | 用户感到被陪伴 | NPS | ≥40 |
| **提升使用体验** | 比文字 AI 更沉浸 | 会话时长 | ≥15 分钟 |
| **降低使用门槛** | 无需下载/配置 | 首次使用完成率 | ≥80% |
| **保护隐私** | 用户信任产品 | 隐私评分问卷 | ≥4/5 |

### 3.3 OKR 框架

```
Objective 1: 打造令人愉悦的 3D AI 陪伴体验

  KR1: 平均会话时长 ≥15 分钟 (基线: 纯文字 AI 约 8 分钟)
  KR2: NPS ≥40
  KR3: "3D 体验好评" 占比 ≥70% (用户调研)

Objective 2: 实现产品市场契合 (PMF)

  KR1: D7 留存率 ≥25%
  KR2: D30 留存率 ≥10%
  KR3: 有机增长占比 ≥30% (口碑推荐)

Objective 3: 验证商业模式可行性

  KR1: 付费转化率 ≥3%
  KR2: 付费用户 ARPU ≥$5/月
  KR3: 付费用户 D30 留存 ≥50%
```

---

## 4. 目标用户与画像

### 4.1 用户细分

| 细分 | 占比 | 优先级 | 核心需求 |
|------|------|--------|----------|
| 孤独青年 | 50% | P0 | 情感陪伴、倾诉对象 |
| 虚拟角色爱好者 | 30% | P1 | 角色互动、自定义 |
| VTuber/创作者 | 20% | P2 | 低成本创作工具 |

### 4.2 主要用户画像

#### Persona A: 孤独青年 "小林" (P0 - 核心用户)

```
┌─────────────────────────────────────────────────────────────┐
│  👤 基本信息                                                │
├─────────────────────────────────────────────────────────────┤
│  年龄: 20-28 岁                                             │
│  职业: 应届毕业生 / 初入职场 / 远程工作者                   │
│  居住: 一线城市独居或与室友同住                              │
│  收入: ¥6,000-15,000/月                                    │
│  设备: 智能手机 (主), 笔记本电脑 (辅)                        │
├─────────────────────────────────────────────────────────────┤
│  🎯 目标                                                    │
├─────────────────────────────────────────────────────────────┤
│  • 下班后有人可以聊天倾诉                                   │
│  • 缓解孤独感和焦虑情绪                                     │
│  • 不被评判的安全表达空间                                   │
├─────────────────────────────────────────────────────────────┤
│  😤 痛点                                                    │
├─────────────────────────────────────────────────────────────┤
│  • 社交圈狭窄，朋友忙碌难以倾诉                             │
│  • 心理咨询费用高 (¥300-800/次)、预约难                    │
│  • 现有 AI 聊天缺乏情感连接，感觉在和机器说话              │
│  • 担心使用 AI 伴侣被朋友发现觉得奇怪                       │
├─────────────────────────────────────────────────────────────┤
│  🔄 现有替代方案                                            │
├─────────────────────────────────────────────────────────────┤
│  • Character.AI (免费，但纯文字，不够沉浸)                  │
│  • Replika ($20/月，功能受限)                               │
│  • 社交媒体刷信息流 (无法满足对话需求)                      │
├─────────────────────────────────────────────────────────────┤
│  💰 付费意愿                                                │
├─────────────────────────────────────────────────────────────┤
│  • 免费试用后，愿意付 ¥30-50/月 获得更好体验               │
│  • 对高质量语音和记忆功能有付费意愿                         │
└─────────────────────────────────────────────────────────────┘
```

**场景故事:**

> 小林是一名刚毕业的程序员，独自在北京租房。每天下班回家已经很晚，室友也各忙各的。她想找人聊聊工作的烦恼，但朋友们都在忙或者时差不对。她试过 Character.AI，觉得打字聊天不够自然，像在和电脑对话。她希望有一个能"听"她说话、有表情反应的虚拟伴侣。

#### Persona B: 虚拟角色爱好者 "阿宅" (P1)

```
┌─────────────────────────────────────────────────────────────┐
│  👤 基本信息                                                │
├─────────────────────────────────────────────────────────────┤
│  年龄: 22-35 岁                                             │
│  职业: 程序员 / 设计师 / 学生                               │
│  兴趣: 二次元、VTuber、Galgame、动画                        │
│  收入: ¥10,000-30,000/月                                   │
│  设备: 高配 PC (主), 智能手机                               │
├─────────────────────────────────────────────────────────────┤
│  🎯 目标                                                    │
├─────────────────────────────────────────────────────────────┤
│  • 与喜欢的虚拟角色进行"真实"互动                          │
│  • 自定义角色外观和性格                                     │
│  • 在社区分享和展示自己的角色                               │
├─────────────────────────────────────────────────────────────┤
│  😤 痛点                                                    │
├─────────────────────────────────────────────────────────────┤
│  • 喜欢的角色只存在于游戏/动画中，无法真正对话             │
│  • 现有产品角色智能程度低，回复机械                         │
│  • 无法导入自己创建或喜欢的 3D 模型                         │
├─────────────────────────────────────────────────────────────┤
│  💰 付费意愿                                                │
├─────────────────────────────────────────────────────────────┤
│  • 高付费意愿，愿意为角色相关内容支付 ¥100+/月             │
│  • 购买过 VTuber 周边、游戏氪金                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.3 用户 Jobs-to-be-Done

| Job Story | 触发场景 | 成功标准 |
|-----------|----------|----------|
| 当我独自一人感到孤独时，我想要与一个理解我的角色交流，这样我就能感到被倾听和陪伴 | 下班回家无人交流、深夜失眠、遇到挫折 | 情绪得到宣泄，孤独感减轻 |
| 当我喜欢某个虚拟角色时，我想要与这个角色进行真实对话，这样我就能满足与角色互动的幻想 | 看完动画意犹未尽、想要角色陪伴 | 角色回应符合人设，有沉浸感 |
| 当我想成为 VTuber 或创作者时，我想要一个低门槛的 3D 角色工具，这样我就能快速开始创作 | 想尝试 VTuber、需要 AI 辅助创作 | 10 分钟内启动，无需专业知识 |

---

## 5. 用户故事与用例

### 5.1 Epic 结构

```
Initiative: 构建 Web 端 3D AI 虚拟伴侣平台
│
├── Epic 1: 3D 角色系统 (P0 - MVP)
│   ├── Story 1.1: VRM 模型加载与渲染
│   ├── Story 1.2: 表情系统
│   ├── Story 1.3: 自动眨眼与闲置动画
│   └── Story 1.4: 角色切换
│
├── Epic 2: AI 对话系统 (P0 - MVP)
│   ├── Story 2.1: 文字对话
│   ├── Story 2.2: 流式响应
│   ├── Story 2.3: 角色人设
│   └── Story 2.4: 对话历史
│
├── Epic 3: 语音交互系统 (P1)
│   ├── Story 3.1: 语音合成 (TTS)
│   ├── Story 3.2: 口型同步
│   ├── Story 3.3: 语音识别 (ASR)
│   └── Story 3.4: 语音活动检测 (VAD)
│
├── Epic 4: 情感与记忆系统 (P2)
│   ├── Story 4.1: 情感分析与表达
│   ├── Story 4.2: 短期记忆
│   ├── Story 4.3: 长期记忆 (本地存储)
│   └── Story 4.4: 关系发展
│
├── Epic 5: 用户账户与设置 (P1)
│   ├── Story 5.1: 访客模式
│   ├── Story 5.2: 账户注册/登录
│   ├── Story 5.3: 偏好设置
│   └── Story 5.4: 数据导出
│
└── Epic 6: 商业化功能 (P2)
    ├── Story 6.1: 订阅付费
    ├── Story 6.2: 高级语音包
    └── Story 6.3: 角色市场
```

### 5.2 用户故事详情 (Epic 1-3)

#### Story 1.1: VRM 模型加载与渲染

```
As a 用户,
I want to 看到一个 3D 虚拟角色在屏幕上,
So that 我能获得比纯文字更沉浸的交互体验.

Priority: P0 (MVP)
Story Points: 5

INVEST Checklist:
- [x] Independent: 不依赖其他 Story
- [x] Negotiable: 具体实现可讨论
- [x] Valuable: 核心差异化功能
- [x] Estimable: 团队可估算
- [x] Small: 1 周内完成
- [x] Testable: 有明确验收标准

Acceptance Criteria:

Scenario: 首次加载默认角色
  Given 用户首次访问应用
  When 页面加载完成
  Then 在 3 秒内显示一个预设的 3D VRM 角色
  And 角色处于待机动画状态
  And 角色面向用户

Scenario: 角色渲染质量
  Given 角色已加载
  When 用户查看角色
  Then 角色材质正确渲染 (皮肤、眼睛、头发)
  And 弹簧骨骼物理效果生效 (头发/衣物)
  And 帧率 ≥30 FPS (中等配置设备)

Scenario: 加载失败处理
  Given 网络连接不稳定
  When 模型加载失败
  Then 显示友好的错误提示
  And 提供"重试"按钮
  And 记录错误日志
```

#### Story 1.2: 表情系统

```
As a 用户,
I want to 看到角色在对话时展示不同的表情,
So that 我能感受到角色的情感反馈.

Priority: P0 (MVP)
Story Points: 5

Acceptance Criteria:

Scenario: 情感触发表情
  Given 角色正在显示
  When AI 返回包含情感标记的回复 (如 [emotion: happy])
  Then 角色在 200ms 内切换到对应表情
  And 表情过渡平滑自然

Scenario: 支持的表情类型
  Given 角色已加载
  Then 支持以下基础表情:
    | 表情 | VRM Expression | 触发场景 |
    | 开心 | happy | 正面情绪对话 |
    | 悲伤 | sad | 负面情绪、安慰 |
    | 惊讶 | surprised | 意外信息 |
    | 生气 | angry | 生气情境 |
    | 思考 | neutral + 眼神移动 | 思考中 |
    | 中性 | neutral | 默认状态 |

Scenario: 表情平滑过渡
  Given 角色当前为"中性"表情
  When 切换到"开心"表情
  Then 表情在 300ms 内平滑过渡
  And 不出现跳变或闪烁
```

#### Story 2.1: 文字对话

```
As a 用户,
I want to 通过文字与角色对话,
So that 我能与 AI 角色进行交流.

Priority: P0 (MVP)
Story Points: 5

Acceptance Criteria:

Scenario: 发送消息
  Given 用户在输入框中输入消息
  When 用户点击发送或按 Enter 键
  Then 消息显示在对话列表中
  And 显示"正在输入..."状态
  And 角色进入"思考"表情

Scenario: 接收回复
  Given 用户已发送消息
  When AI 生成回复
  Then 回复以打字机效果逐字显示
  And 显示速度 ≥30 字符/秒
  And 角色根据回复内容切换表情

Scenario: 对话历史
  Given 用户进行了多轮对话
  Then 对话历史按时间顺序显示
  And 最多保留最近 100 条消息
  And 支持滚动查看历史

Scenario: 网络异常处理
  Given 网络连接中断
  When 用户发送消息
  Then 消息标记为"发送失败"
  And 显示"重试"按钮
  And 不阻塞后续操作
```

#### Story 3.1: 语音合成 (TTS)

```
As a 用户,
I want to 听到角色用语音朗读回复,
So that 我能获得更自然的对话体验.

Priority: P1
Story Points: 8

Acceptance Criteria:

Scenario: 自动朗读回复
  Given TTS 功能已开启 (默认开启)
  When AI 生成文字回复
  Then 自动开始语音朗读
  And 语音延迟 < 500ms (从文字生成到语音开始)
  And 语音自然流畅，无明显机械感

Scenario: TTS 提供商选择
  Given 用户在设置中选择 TTS 提供商
  Then 支持以下选项:
    | 提供商 | 类型 | 特点 |
    | Kokoro | 本地 | 免费，隐私，82M参数 |
    | ElevenLabs | 云端 | 最高质量，付费 |
    | 系统语音 | 本地 | 免费，质量一般 |

Scenario: 语音中断
  Given 角色正在朗读
  When 用户点击"停止"按钮或发送新消息
  Then 语音立即停止
  And 口型动画停止

Scenario: 语音设置
  Given 用户进入语音设置
  Then 可以调整:
    | 设置项 | 范围 | 默认值 |
    | 语速 | 0.5x - 2.0x | 1.0x |
    | 音量 | 0 - 100% | 80% |
    | 自动朗读 | 开/关 | 开 |
```

#### Story 3.2: 口型同步

```
As a 用户,
I want to 看到角色说话时嘴巴动作与语音同步,
So that 我能感受到更真实的对话体验.

Priority: P1
Story Points: 8

Acceptance Criteria:

Scenario: 实时口型同步
  Given 角色正在朗读语音
  When 语音播放过程中
  Then 角色嘴型与音频节奏同步
  And 嘴型变化包含基础音素 (开/闭/圆等)
  And 同步延迟 < 50ms

Scenario: Viseme 映射
  Given TTS 返回 Viseme 数据
  Then 正确映射到 VRM 口型表情:
    | Viseme | VRM BlendShape | 音素 |
    | sil | 嘴闭合 | 静音 |
    | aa | a 型嘴 | a, ah |
    | ee | e 型嘴 | e, i |
    | oh | o 型嘴 | o, u |
    | ... | ... | ... |

Scenario: 无 Viseme 时的降级
  Given TTS 不返回 Viseme 数据 (如系统语音)
  When 语音播放
  Then 使用音量分析驱动简单的张嘴动画
  And 动画依然与语音大致同步
```

### 5.3 核心用例流程

#### Use Case 1: 首次使用对话

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      Use Case: 首次使用对话                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  Actor: 新用户                                                          │
│  Precondition: 用户首次访问产品页面                                     │
│  Goal: 完成第一次与 AI 角色的对话                                       │
│                                                                         │
│  Main Flow:                                                             │
│  ┌───┐                                                                  │
│  │ 1 │ 用户打开产品网页                                                 │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 2 │ 系统显示加载动画，加载 3D 角色和资源 (< 5秒)                    │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 3 │ 角色加载完成，进入待机状态                                       │
│  │   │ 角色主动打招呼: "你好！我是 [角色名]，很高兴认识你~"             │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 4 │ 用户在输入框输入消息或点击麦克风语音输入                         │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 5 │ 系统发送消息到 LLM，角色进入"思考"表情                          │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 6 │ AI 返回回复，角色用语音朗读 + 口型同步                           │
│  │   │ 同时根据内容切换表情                                             │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 7 │ 用户继续对话或结束会话                                           │
│  └───┘                                                                  │
│                                                                         │
│  Postcondition: 用户完成首次对话，对话历史保存到本地存储                │
│                                                                         │
├─────────────────────────────────────────────────────────────────────────┤
│  Alternative Flows:                                                     │
│                                                                         │
│  2a. 加载超时 (> 10秒):                                                │
│      → 显示"加载较慢，请检查网络"提示                                  │
│      → 提供"重试"按钮                                                  │
│                                                                         │
│  4a. 用户选择语音输入:                                                  │
│      → 请求麦克风权限                                                   │
│      → 实时转录语音为文字                                               │
│      → 显示转录结果，用户确认发送                                       │
│                                                                         │
│  6a. API 请求失败:                                                      │
│      → 显示错误消息                                                     │
│      → 提供"重试"按钮                                                  │
│      → 记录错误日志                                                     │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

#### Use Case 2: 自定义角色

```
┌─────────────────────────────────────────────────────────────────────────┐
│                      Use Case: 自定义角色                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  Actor: 注册用户                                                        │
│  Precondition: 用户已登录                                               │
│  Goal: 导入自己的 VRM 角色并设置性格                                    │
│                                                                         │
│  Main Flow:                                                             │
│  ┌───┐                                                                  │
│  │ 1 │ 用户点击"角色设置" → "导入角色"                                 │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 2 │ 选择本地 VRM 文件 (≤ 50MB)                                      │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 3 │ 系统验证并预览角色                                               │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 4 │ 用户设置角色名称和性格描述                                       │
│  │   │ (可选择预设模板或自定义)                                         │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 5 │ 用户选择语音 (预设或自定义)                                      │
│  └─┬─┘                                                                  │
│    ▼                                                                    │
│  ┌───┐                                                                  │
│  │ 6 │ 保存角色配置，切换到新角色                                       │
│  └───┘                                                                  │
│                                                                         │
│  Postcondition: 新角色保存到用户角色库，可随时切换                      │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 6. 功能需求

### 6.1 功能清单 (MoSCoW 优先级)

#### Must Have (MVP 必须)

| ID | 功能 | 描述 | Story Points |
|----|------|------|--------------|
| F001 | VRM 角色渲染 | 加载和渲染 VRM 格式 3D 角色 | 5 |
| F002 | 基础表情系统 | 6 种基础表情 (开心/悲伤/惊讶/生气/思考/中性) | 5 |
| F003 | 文字对话 | 与 LLM 进行文字对话，流式响应 | 5 |
| F004 | 角色人设 | 可配置的角色性格和说话风格 | 3 |
| F005 | 对话历史 | 显示和保存对话历史 (本地) | 3 |
| F006 | 响应式 UI | 支持桌面和移动端浏览器 | 5 |

**MVP 总计**: 26 Story Points

#### Should Have (重要但非必须)

| ID | 功能 | 描述 | Story Points |
|----|------|------|--------------|
| F007 | TTS 语音合成 | 角色用语音朗读回复 | 8 |
| F008 | 口型同步 | 语音与嘴型动画同步 | 8 |
| F009 | 自动眨眼 | 自然的自动眨眼动画 | 2 |
| F010 | 闲置动画 | 角色待机时的微动画 | 3 |
| F011 | 多 LLM 支持 | 支持 OpenAI/Claude/Ollama | 5 |
| F012 | 语音设置 | 语速、音量、语音选择 | 3 |
| F013 | 用户设置面板 | 集中管理各项设置 | 5 |

**Should Have 总计**: 34 Story Points

#### Could Have (有时间就做)

| ID | 功能 | 描述 | Story Points |
|----|------|------|--------------|
| F014 | ASR 语音识别 | 语音输入 (Whisper 浏览器端) | 8 |
| F015 | 短期记忆 | 角色记住最近对话上下文 | 3 |
| F016 | VRM 角色导入 | 用户导入自己的 VRM 文件 | 5 |
| F017 | 预设角色库 | 提供多个预设角色选择 | 3 |
| F018 | 深色/浅色主题 | 主题切换 | 2 |
| F019 | 快捷回复 | 预设的快捷回复选项 | 2 |

**Could Have 总计**: 23 Story Points

#### Won't Have (本版本不做)

| ID | 功能 | 原因 |
|----|------|------|
| F020 | 长期记忆 | 需要后端存储，MVP 阶段不做 |
| F021 | 摄像头追踪 | 复杂度高，后续版本考虑 |
| F022 | 用户表情镜像 | 依赖摄像头追踪 |
| F023 | 多角色同时在线 | 架构复杂，后续版本 |
| F024 | 角色市场 | 需要 UGC 生态，后续版本 |
| F025 | 声音克隆 | 技术和法律复杂度高 |

### 6.2 功能详细规格

#### F001: VRM 角色渲染

```yaml
Feature ID: F001
Name: VRM 角色渲染
Priority: Must Have (MVP)
Story Points: 5

Description: |
  加载和渲染 VRM 格式的 3D 虚拟角色，支持完整的 VRM 1.0 规范，
  包括骨骼动画、表情、弹簧骨骼等特性。

Technical Requirements:
  - Library: @pixiv/three-vrm ^3.0.0
  - Renderer: Three.js WebGL
  - Model Format: VRM 1.0 (glTF 2.0 extension)
  - Max File Size: 50MB
  - Target FPS: ≥30 (中等配置设备)

Functional Requirements:
  - FR001-1: 支持加载本地和远程 VRM 文件
  - FR001-2: 正确渲染材质 (MToon shader)
  - FR001-3: 支持弹簧骨骼物理 (头发、衣物)
  - FR001-4: 支持视线跟踪 (LookAt)
  - FR001-5: 支持人形骨骼动画 (Humanoid)

Performance Requirements:
  - 首次加载时间: < 5s (20MB 模型, 4G 网络)
  - 渲染帧率: ≥30 FPS (GTX 1060 级别 GPU)
  - 内存占用: < 500MB

Error Handling:
  - 模型加载失败: 显示友好错误 + 重试按钮
  - 格式不支持: 提示"请使用 VRM 格式文件"
  - 文件过大: 提示"文件超过 50MB 限制"

Testing Criteria:
  - [ ] 加载官方 VRM 示例模型成功
  - [ ] 加载 VRoid Studio 导出模型成功
  - [ ] 弹簧骨骼物理效果正常
  - [ ] 表情切换正常
  - [ ] 帧率满足要求
```

#### F007: TTS 语音合成

```yaml
Feature ID: F007
Name: TTS 语音合成
Priority: Should Have
Story Points: 8

Description: |
  将 AI 生成的文字回复转换为语音，支持多种 TTS 引擎，
  提供自然流畅的语音体验。

TTS Providers:
  - Kokoro (Default):
      Type: 浏览器本地 (WebGPU/WASM)
      Quality: ⭐⭐⭐⭐
      Latency: ~300ms
      Cost: Free
      Languages: zh, en, ja, ko, + 5 more

  - ElevenLabs (Premium):
      Type: 云端 API
      Quality: ⭐⭐⭐⭐⭐
      Latency: ~200ms
      Cost: $5+/月
      Features: 声音克隆, 多角色

  - Web Speech API (Fallback):
      Type: 浏览器原生
      Quality: ⭐⭐
      Latency: ~50ms
      Cost: Free
      Note: 质量因浏览器/系统而异

Functional Requirements:
  - FR007-1: 自动朗读 AI 回复 (可关闭)
  - FR007-2: 支持中途打断
  - FR007-3: 语速调节 (0.5x - 2.0x)
  - FR007-4: 音量调节 (0 - 100%)
  - FR007-5: 提供 Viseme 数据用于口型同步

Performance Requirements:
  - 首词延迟 (TTFB): < 500ms
  - 流式播放: 支持 (边生成边播放)

Settings:
  - tts.provider: "kokoro" | "elevenlabs" | "web-speech"
  - tts.voice: string (语音 ID)
  - tts.speed: number (0.5 - 2.0, default: 1.0)
  - tts.volume: number (0 - 1.0, default: 0.8)
  - tts.autoPlay: boolean (default: true)

Error Handling:
  - 网络失败 (云端 TTS): 自动降级到 Web Speech API
  - 音频播放失败: 显示文字回复，隐藏语音按钮
```

---

## 7. 非功能需求

### 7.1 性能需求

| 类别 | 指标 | 目标值 | 衡量方式 |
|------|------|--------|----------|
| 页面加载 | FCP (First Contentful Paint) | < 1.5s | Lighthouse |
| 页面加载 | LCP (Largest Contentful Paint) | < 3.0s | Lighthouse |
| 交互响应 | FID (First Input Delay) | < 100ms | Lighthouse |
| 视觉稳定 | CLS (Cumulative Layout Shift) | < 0.1 | Lighthouse |
| 3D 渲染 | 帧率 | ≥30 FPS | 性能监控 |
| 3D 渲染 | 模型加载 | < 5s (20MB, 4G) | 埋点 |
| AI 响应 | 首 Token 延迟 | < 1s | 埋点 |
| TTS 延迟 | 首词发声 | < 500ms | 埋点 |

### 7.2 可用性需求

| 类别 | 指标 | 目标值 |
|------|------|--------|
| 服务可用性 | Uptime | 99.9% |
| 服务可用性 | MTTR (平均恢复时间) | < 1 小时 |
| 错误率 | API 错误率 | < 0.1% |
| 错误率 | 页面崩溃率 | < 0.5% |

### 7.3 兼容性需求

```yaml
Desktop Browsers:
  - Chrome: ≥90 (推荐)
  - Firefox: ≥90
  - Safari: ≥15
  - Edge: ≥90

Mobile Browsers:
  - iOS Safari: ≥15
  - Android Chrome: ≥90

Special Requirements:
  - WebGL 2.0: Required
  - WebGPU: Optional (TTS 加速)
  - WASM: Required (Whisper)
  - Microphone: Optional (语音输入)

Screen Sizes:
  - Desktop: 1280px+ (推荐)
  - Tablet: 768px - 1279px
  - Mobile: 375px - 767px
```

### 7.4 安全需求

| 类别 | 要求 |
|------|------|
| 传输加密 | 所有 API 请求使用 HTTPS |
| 数据存储 | 本地存储使用 IndexedDB，可加密 |
| API 密钥 | 用户 API Key 仅存储在本地，不上传服务器 |
| 第三方服务 | 明确告知用户数据发送到哪些服务 |
| 内容安全 | 提供内容过滤选项 |
| 隐私政策 | 符合 GDPR/CCPA 要求 |

### 7.5 可访问性需求

| 类别 | 要求 | 标准 |
|------|------|------|
| 键盘导航 | 所有交互可通过键盘完成 | WCAG 2.2 AA |
| 屏幕阅读器 | 关键内容有 ARIA 标签 | WCAG 2.2 AA |
| 颜色对比 | 文字对比度 ≥4.5:1 | WCAG 2.2 AA |
| 字体大小 | 支持放大到 200% | WCAG 2.2 AA |
| 动画 | 尊重 prefers-reduced-motion | WCAG 2.2 AA |

---

## 8. 范围定义

### 8.1 MVP 范围 (Phase 1)

```
┌─────────────────────────────────────────────────────────────┐
│                        MVP 范围                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ✅ 包含:                                                   │
│  • VRM 3D 角色渲染 (1个预设角色)                           │
│  • 6种基础表情                                              │
│  • 文字对话 (OpenAI GPT-4o)                                │
│  • 角色人设 (1个预设性格)                                   │
│  • 对话历史 (本地存储)                                      │
│  • 响应式 Web UI                                            │
│                                                             │
│  ❌ 不包含:                                                 │
│  • 语音交互 (TTS/ASR)                                      │
│  • 口型同步                                                 │
│  • 用户账户系统                                             │
│  • 角色自定义/导入                                          │
│  • 多 LLM 支持                                             │
│  • 付费功能                                                 │
│                                                             │
│  📊 目标:                                                   │
│  • 验证 3D 角色 vs 纯文字的价值                            │
│  • 获取 1000+ 早期用户反馈                                 │
│  • D7 留存 ≥20%                                            │
│                                                             │
│  ⏱️ 时间: 4 周                                              │
│  👥 资源: 2 开发 + 1 设计                                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 8.2 Phase 2 范围

```
┌─────────────────────────────────────────────────────────────┐
│                       Phase 2 范围                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ✅ 新增:                                                   │
│  • TTS 语音合成 (Kokoro + ElevenLabs)                      │
│  • 口型同步                                                 │
│  • 自动眨眼 + 闲置动画                                      │
│  • 多 LLM 支持 (OpenAI/Claude/Ollama)                      │
│  • 用户设置面板                                             │
│  • 预设角色库 (3-5 个角色)                                  │
│                                                             │
│  📊 目标:                                                   │
│  • 会话时长 ≥15 分钟                                       │
│  • D7 留存 ≥25%                                            │
│  • NPS ≥40                                                 │
│                                                             │
│  ⏱️ 时间: 4 周                                              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 8.3 Phase 3 范围

```
┌─────────────────────────────────────────────────────────────┐
│                       Phase 3 范围                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ✅ 新增:                                                   │
│  • ASR 语音输入 (Whisper 浏览器端)                         │
│  • VRM 角色导入                                             │
│  • 短期记忆系统                                             │
│  • 情感分析增强                                             │
│  • 用户账户系统                                             │
│  • 订阅付费功能                                             │
│                                                             │
│  📊 目标:                                                   │
│  • 付费转化 ≥3%                                            │
│  • D30 留存 ≥10%                                           │
│                                                             │
│  ⏱️ 时间: 6 周                                              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 8.4 后续版本考虑

| 功能 | 优先级 | 依赖 | 预计版本 |
|------|--------|------|----------|
| 长期记忆 | High | 后端存储 | v2.0 |
| 角色市场 | Medium | UGC 生态 | v2.0 |
| 摄像头追踪 | Medium | 隐私合规 | v2.0 |
| 多角色同屏 | Low | 性能优化 | v3.0 |
| AR/VR 支持 | Low | WebXR 成熟 | v3.0 |
| 声音克隆 | Low | 法律合规 | TBD |

---

## 9. 设计与用户体验

### 9.1 设计原则

```
1. 沉浸优先 (Immersion First)
   • 3D 角色是核心，UI 元素最小化干扰
   • 角色占据主要视觉区域
   • 对话气泡不遮挡角色表情

2. 即时反馈 (Instant Feedback)
   • 用户操作后 100ms 内有视觉反馈
   • AI 思考时角色有表情变化
   • 语音播放时有口型同步

3. 情感连接 (Emotional Connection)
   • 角色表情与对话内容匹配
   • 自然的眨眼和微动作
   • 记住用户说过的话

4. 隐私尊重 (Privacy Respect)
   • 默认本地存储
   • 明确告知数据去向
   • 一键清除数据
```

### 9.2 信息架构

```
┌─────────────────────────────────────────────────────────────┐
│                        首页                                 │
│                     (角色 + 对话)                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                   3D 角色区域                        │   │
│  │                   (60% 高度)                         │   │
│  │                                                      │   │
│  │              ┌─────────────────┐                    │   │
│  │              │                 │                    │   │
│  │              │    VRM 角色     │                    │   │
│  │              │                 │                    │   │
│  │              └─────────────────┘                    │   │
│  │                                                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                   对话区域                           │   │
│  │                   (40% 高度)                         │   │
│  │                                                      │   │
│  │  ┌─────────────────────────────────────────────┐    │   │
│  │  │ 对话历史 (可滚动)                            │    │   │
│  │  │ • 角色: 你好！我是...                        │    │   │
│  │  │ • 用户: 今天心情不太好                       │    │   │
│  │  │ • 角色: 怎么了？跟我说说...                  │    │   │
│  │  └─────────────────────────────────────────────┘    │   │
│  │                                                      │   │
│  │  ┌───────────────────────────────┐ ┌────┐ ┌────┐   │   │
│  │  │ 输入消息...                    │ │🎤 │ │ ➤ │   │   │
│  │  └───────────────────────────────┘ └────┘ └────┘   │   │
│  │                                                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌────┐  ┌────┐  ┌────┐                                   │
│  │ ⚙️ │  │ 👤 │  │ ❓ │  ← 底部导航                        │
│  │设置 │  │角色 │  │帮助 │                                   │
│  └────┘  └────┘  └────┘                                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 9.3 关键页面设计

#### 页面 1: 主界面 (对话)

**桌面布局:**
```
┌───────────────────────────────────────────────────────────────────────┐
│  [Logo]                                      [设置] [角色] [登录]     │
├───────────────────────────────────────────────────────────────────────┤
│                                                                       │
│  ┌─────────────────────────────────┐  ┌─────────────────────────────┐ │
│  │                                 │  │                             │ │
│  │                                 │  │  对话历史                   │ │
│  │         3D 角色区域             │  │  ────────────────────────   │ │
│  │                                 │  │  🤖 你好！我是小雪...       │ │
│  │         (VRM 渲染)              │  │                             │ │
│  │                                 │  │  👤 今天好累啊              │ │
│  │                                 │  │                             │ │
│  │                                 │  │  🤖 辛苦了呢~ 想聊聊吗？    │ │
│  │                                 │  │                             │ │
│  │                                 │  ├─────────────────────────────┤ │
│  │                                 │  │ [输入消息...]    [🎤] [➤]  │ │
│  └─────────────────────────────────┘  └─────────────────────────────┘ │
│                                                                       │
│        60%                                     40%                    │
│                                                                       │
└───────────────────────────────────────────────────────────────────────┘
```

**移动端布局:**
```
┌─────────────────────────────┐
│  [≡]    Codia    [⚙️]      │
├─────────────────────────────┤
│                             │
│    ┌─────────────────┐      │
│    │                 │      │
│    │   3D 角色区域   │      │
│    │   (45% 高度)    │      │
│    │                 │      │
│    └─────────────────┘      │
│                             │
├─────────────────────────────┤
│                             │
│  对话历史 (可滚动)          │
│  ─────────────────────────  │
│  🤖 你好！...               │
│  👤 今天好累                │
│  🤖 辛苦了...               │
│                             │
├─────────────────────────────┤
│ [输入消息...]    [🎤] [➤]  │
└─────────────────────────────┘
```

#### 页面 2: 设置面板

```
┌─────────────────────────────────────────┐
│  ← 设置                                 │
├─────────────────────────────────────────┤
│                                         │
│  AI 对话                                │
│  ─────────────────────────────────────  │
│  LLM 提供商     [OpenAI     ▼]         │
│  API Key        [••••••••••••]  [👁]   │
│  模型           [gpt-4o      ▼]         │
│                                         │
│  语音                                   │
│  ─────────────────────────────────────  │
│  TTS 提供商     [Kokoro      ▼]         │
│  语音角色       [小雪 (女声)  ▼]         │
│  语速           [====●=====] 1.0x       │
│  音量           [=======●==] 80%        │
│  自动朗读       [●] 开启                │
│                                         │
│  显示                                   │
│  ─────────────────────────────────────  │
│  主题           [自动  ▼]               │
│  角色大小       [====●=====] 中         │
│                                         │
│  隐私                                   │
│  ─────────────────────────────────────  │
│  本地 LLM       [○] 关闭                │
│  清除对话历史   [清除]                  │
│  导出数据       [导出]                  │
│                                         │
└─────────────────────────────────────────┘
```

### 9.4 设计资源

| 资源 | 链接 | 说明 |
|------|------|------|
| Figma 设计稿 | [待创建] | 完整 UI 设计 |
| 设计系统 | Tailwind CSS + shadcn/ui | 组件库 |
| 图标 | Lucide Icons | 开源图标库 |
| 字体 | Inter (西文) + Noto Sans SC (中文) | 免费字体 |

---

## 10. 技术考量

### 10.1 技术架构概览

```
┌─────────────────────────────────────────────────────────────────────┐
│                          前端应用 (Browser)                         │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │
│  │   React     │  │  Three.js   │  │   Zustand   │  │  TailwindCSS│ │
│  │   Next.js   │  │  + R3F      │  │   State     │  │   + shadcn  │ │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘ │
│         │                │                │                │        │
│         └────────────────┴────────────────┴────────────────┘        │
│                                  │                                  │
│  ┌───────────────────────────────┴───────────────────────────────┐  │
│  │                      Core Services Layer                       │  │
│  ├─────────────┬─────────────┬─────────────┬─────────────────────┤  │
│  │ VRM Service │ Chat Service│ TTS Service │ ASR Service         │  │
│  │ @pixiv/vrm  │ OpenAI SDK  │ Kokoro/11L  │ Whisper (Browser)   │  │
│  └─────────────┴─────────────┴─────────────┴─────────────────────┘  │
│                                  │                                  │
│  ┌───────────────────────────────┴───────────────────────────────┐  │
│  │                       Local Storage Layer                      │  │
│  │                     IndexedDB + LocalStorage                   │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
                                   │
                    ┌──────────────┼──────────────┐
                    │              │              │
                    ▼              ▼              ▼
             ┌───────────┐  ┌───────────┐  ┌───────────┐
             │  OpenAI   │  │  Claude   │  │  Ollama   │
             │   API     │  │   API     │  │  (Local)  │
             └───────────┘  └───────────┘  └───────────┘
```

### 10.2 技术栈选择

| 层级 | 技术 | 版本 | 选择理由 |
|------|------|------|----------|
| **框架** | Next.js | 14+ | App Router, RSC, 优秀 DX |
| **语言** | TypeScript | 5.0+ | 类型安全 |
| **3D 渲染** | Three.js + R3F | latest | Web 3D 标准 |
| **VRM 支持** | @pixiv/three-vrm | 3.0+ | 官方 VRM 库 |
| **状态管理** | Zustand | 4.0+ | 轻量、简单 |
| **样式** | Tailwind CSS | 3.0+ | 快速开发 |
| **UI 组件** | shadcn/ui | latest | 可定制组件 |
| **TTS** | Kokoro.js | latest | 浏览器本地 TTS |
| **ASR** | Transformers.js (Whisper) | latest | 浏览器本地 ASR |

### 10.3 API 设计

#### LLM Chat API

```typescript
// 请求
interface ChatRequest {
  messages: Array<{
    role: 'system' | 'user' | 'assistant'
    content: string
  }>
  model: string
  temperature?: number
  max_tokens?: number
  stream?: boolean
}

// 响应 (流式)
interface ChatStreamChunk {
  id: string
  choices: Array<{
    delta: {
      content?: string
    }
    finish_reason: 'stop' | 'length' | null
  }>
}

// 解析后的响应
interface ParsedResponse {
  text: string
  emotion?: 'happy' | 'sad' | 'surprised' | 'angry' | 'thinking' | 'neutral'
}
```

#### TTS API

```typescript
interface TTSRequest {
  text: string
  voice: string
  speed?: number
  provider: 'kokoro' | 'elevenlabs' | 'web-speech'
}

interface TTSResponse {
  audio: Blob | ArrayBuffer
  visemes?: Array<{
    viseme: string
    time: number
    duration: number
  }>
}
```

### 10.4 数据模型

```typescript
// 角色配置
interface Character {
  id: string
  name: string
  modelUrl: string
  personality: string
  voice: {
    provider: string
    voiceId: string
    speed: number
  }
  createdAt: number
  updatedAt: number
}

// 对话消息
interface Message {
  id: string
  role: 'user' | 'assistant'
  content: string
  emotion?: string
  timestamp: number
}

// 用户设置
interface UserSettings {
  llm: {
    provider: 'openai' | 'anthropic' | 'ollama'
    model: string
    apiKey?: string // 加密存储
  }
  tts: {
    provider: 'kokoro' | 'elevenlabs' | 'web-speech'
    voice: string
    speed: number
    volume: number
    autoPlay: boolean
  }
  display: {
    theme: 'light' | 'dark' | 'system'
    characterScale: number
  }
  privacy: {
    useLocalLLM: boolean
    analyticsEnabled: boolean
  }
}
```

### 10.5 第三方依赖

| 依赖 | 用途 | 许可证 | 风险评估 |
|------|------|--------|----------|
| three | 3D 渲染 | MIT | 低 |
| @pixiv/three-vrm | VRM 支持 | MIT | 低 |
| @react-three/fiber | React 3D | MIT | 低 |
| openai | LLM API | MIT | 低 |
| transformers.js | Whisper ASR | Apache 2.0 | 低 |
| kokoro-js | TTS | Apache 2.0 | 低 |
| zustand | 状态管理 | MIT | 低 |
| tailwindcss | 样式 | MIT | 低 |

---

## 11. 发布计划

### 11.1 发布策略

```
┌─────────────────────────────────────────────────────────────────────┐
│                          发布策略                                   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  Phase 1: Alpha 内测 (Week 1-4)                                    │
│  ─────────────────────────────────────────────────────────────────  │
│  • 邀请 50-100 名内测用户                                          │
│  • 收集核心功能反馈                                                 │
│  • 快速迭代修复问题                                                 │
│                                                                     │
│  Phase 2: Beta 公测 (Week 5-8)                                     │
│  ─────────────────────────────────────────────────────────────────  │
│  • 开放注册，限制 1000 用户                                        │
│  • A/B 测试关键功能                                                │
│  • 收集留存和使用数据                                               │
│                                                                     │
│  Phase 3: 正式发布 (Week 9+)                                       │
│  ─────────────────────────────────────────────────────────────────  │
│  • 全面开放                                                         │
│  • 启动增长活动                                                     │
│  • 上线付费功能                                                     │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 11.2 发布检查清单

```markdown
## Alpha 发布检查

### 功能
- [ ] VRM 角色加载正常
- [ ] 表情系统工作正常
- [ ] 文字对话功能完整
- [ ] 对话历史保存正常
- [ ] 响应式布局适配

### 质量
- [ ] 无 P0/P1 Bug
- [ ] 核心流程通过测试
- [ ] 性能指标达标
- [ ] 浏览器兼容性验证

### 运维
- [ ] 错误监控配置 (Sentry)
- [ ] 性能监控配置
- [ ] 用户反馈渠道就绪

### 文档
- [ ] 用户帮助文档
- [ ] FAQ 准备
- [ ] 隐私政策上线
```

### 11.3 监控与告警

| 指标 | 告警阈值 | 通知方式 |
|------|----------|----------|
| 页面崩溃率 | > 1% | Slack + 邮件 |
| API 错误率 | > 0.5% | Slack |
| 首屏加载时间 | > 5s (P95) | Slack |
| 3D 渲染帧率 | < 20 FPS | Dashboard |

### 11.4 回滚计划

```
触发条件:
• P0 Bug 影响 >10% 用户
• 页面崩溃率 >2%
• API 错误率 >1%

回滚步骤:
1. 确认问题范围和影响
2. 切换到上一个稳定版本 (Vercel 一键回滚)
3. 通知用户 (如需要)
4. 分析根因
5. 修复后重新发布
```

---

## 12. 风险与开放问题

### 12.1 风险登记

| ID | 风险 | 概率 | 影响 | 缓解措施 | 负责人 |
|----|------|------|------|----------|--------|
| R1 | LLM API 成本超预期 | 高 | 中 | 支持本地 LLM (Ollama)，优化 Prompt | Tech Lead |
| R2 | 3D 性能在低端设备不足 | 中 | 高 | 渐进式降级，提供 2D 模式 | Tech Lead |
| R3 | 浏览器 TTS 质量不佳 | 中 | 中 | 默认使用 Kokoro，提供多选项 | Tech Lead |
| R4 | 用户过度依赖 AI | 高 | 高 | 使用时长提醒，健康引导 | PM |
| R5 | 竞品快速跟进 | 中 | 中 | 快速迭代，差异化定位 | PM |
| R6 | 内容合规问题 | 中 | 高 | 内容过滤，用户协议 | Legal |

### 12.2 开放问题

| ID | 问题 | 影响范围 | 截止日期 | 负责人 |
|----|------|----------|----------|--------|
| Q1 | 是否需要用户注册才能使用？ | 产品策略 | Week 2 | PM |
| Q2 | 免费版 API 调用限制是多少？ | 商业模式 | Week 3 | PM |
| Q3 | 是否支持用户上传语音克隆？ | 法律合规 | Week 4 | Legal |
| Q4 | 如何处理不当内容生成？ | 内容安全 | Week 3 | PM + Tech |

### 12.3 依赖

| 依赖 | 类型 | 状态 | 影响 |
|------|------|------|------|
| OpenAI API | 外部服务 | ✅ 可用 | LLM 对话 |
| ElevenLabs API | 外部服务 | ✅ 可用 | 高质量 TTS |
| Kokoro 模型 | 开源模型 | ✅ 可用 | 本地 TTS |
| VRM 示例模型 | 资源 | ⚠️ 需确认版权 | 预设角色 |

---

## 附录

### A. 术语表

| 术语 | 定义 |
|------|------|
| VRM | Virtual Reality Model，3D 虚拟角色格式标准 |
| LLM | Large Language Model，大语言模型 |
| TTS | Text-to-Speech，文字转语音 |
| ASR | Automatic Speech Recognition，语音识别 |
| Viseme | 视素，语音的视觉表现单元，用于口型同步 |
| BlendShape | 混合变形，3D 模型的表情/变形数据 |
| DAU | Daily Active Users，日活跃用户 |
| NPS | Net Promoter Score，净推荐值 |

### B. 参考文档

| 文档 | 链接 |
|------|------|
| 产品发现文档 | [01-Product-Discovery.md](./01-Product-Discovery.md) |
| 技术文档 | [AI-Virtual-Companion-Technical-Doc.md](../AI-Virtual-Companion-Technical-Doc.md) |
| VRM 规范 | https://vrm.dev/en/ |
| Amica 开源项目 | https://github.com/semperai/amica |

### C. 修订历史

| 日期 | 版本 | 修订内容 | 作者 |
|------|------|----------|------|
| 2026-01-04 | v1.0 | 初始版本 | PM |

---

*文档状态: Draft*
*下次评审: [待定]*
*审批人: [待定]*
